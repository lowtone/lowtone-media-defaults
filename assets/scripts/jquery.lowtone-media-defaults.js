// Generated by CoffeeScript 1.5.0
(function() {
  var $;

  $ = jQuery;

  $(function() {
    var media_frame;
    media_frame = null;
    return $('input[name="lowtone_media_defaults[default]"]').click(function() {
      var $input;
      $input = $(this);
      if (media_frame) {
        media_frame.open();
        return;
      }
      media_frame = wp.media({
        className: 'media-frame lowtone-media-dropbox',
        frame: 'select',
        multiple: false,
        title: lowtone_media_defaults.title,
        library: {
          type: 'image'
        },
        button: {
          text: lowtone_media_defaults.button_text
        }
      });
      media_frame.on('select', function() {
        var attachment;
        attachment = media_frame.state().get('selection').first().toJSON();
        return $input.val(attachment.id);
      });
      return media_frame.open();
    });
  });

}).call(this);
